pico-8 cartridge // http://www.pico-8.com
version 16
__lua__
--avatar vbls
ax = 60
ay = 60
doorx = 0
doory = 0
door = false
avatar = 001
room = 1
priamry_text = false
secondary_text = false

--sprite values
--room one

text = {0, 108}

function draw_door()
 if door == false then
		doorx = ceil(rnd(118))
		doory = ceil(rnd(100))
		spr(009, doorx, doory)
	 door = true
	elseif door == true then
		spr(009, doorx, doory)
	end
end

--room two

--functions

--change sprite based
--on facing direction

function changeavatar(pos1, pos2)
	if avatar != pos1 then
	 avatar = pos1
	elseif avatar == pos1 then
	 avatar = pos2
	end
end

--move avatar sprite

function moveavatar()
	if room == 1 then
			rectfill(text[1], text[2], text[1]+1, text[2]+1, 3)
		 text[1] += 1
		 text[2] += 1
	end	
	if btn(0) and ax >= 1 then
	 ax-=1
	 changeavatar(007, 008)
 elseif btn(1) and ax <= 118 then
	 ax+=1
	 changeavatar(005, 006)
	elseif btn(2) and ay >= 1 then
	 ay-=1
	 changeavatar(003, 004)
	elseif btn(3) and ay <= 118 then
	 ay+=1
	 changeavatar(001, 002)
 end
end

--clear room
--reset variables to default

function next_room(next)
 	
 ax = 60
 ay = 60
 doorx = 0
 doory = 0
 door = false
 avatar = 001
 priamry_text = false
 secondary_text = false
 room = next
 
end

function _update()
	moveavatar()
	if ax >= doorx and ax <= doorx+3 and ay <= doory and ay >= doory-7 then
	 next_room(2)
	end
	if room == 1 then
	 if t() > 10 and t() < 20 then
	 	primary_text = true
	 else primary_text = false
	 end
		if t() > 20 and ax < 25 or t() > 20 and ax > 100 then
			secondary_text = true
	 end
	end
end

function print_locale()
	print('player position: '..ax..' x '..ay..' y ', 30, 40, 3)
	print('door position: '..doorx..' x '..doory..' y ', 30, 50, 3)
end

function _draw()
 --clear screen
 rectfill(0,0,128,128,0)
 
 --draw character
 spr(avatar,ax,ay)
-- print_locale()
 
 if room == 1 then
		if primary_text == true then
			print('as a child,',0, 108, 3)
		 print('life felt pretty aimless.',0,120,3)
		end
		if secondary_text == true then
			print('but eventually i found myself', 0,108,3)
			print('at my first door.',0,120, 3) 	
		 draw_door()
  end
	elseif room == 2 then
 	 print('okay next room', 30, 50, 3)
 	 map(16,13,0,0,16,8)
	end 
-- 	begin()
	print(t(), 30, 30, 3)
	print(room, 30, 40, 3)
end

__gfx__
00000000606666060066660060666606006666000066000000660000000066000000660000444400000000000000000000000000000000000000000000000000
00000000606006060060060060666606006666000066600000666000000666000006660004000040000000000000000000000000000000000000000000000000
00000000060660600606606006066060060660600060000000600000000006000000060040000004000000000000000000000000000000000000000000000000
00000000006666006066660600666600606666060066000000666000000066000006660040000004000000000000000000000000000000000000000000000000
00000000006666006066660600666600606666060066600000660000000666000000660040000004000000000000000000000000000000000000000000000000
00000000006666000066660000666600006666000066000000660000000066000000660040000904000000000000000000000000000000000000000000000000
00000000006006000060060000600600006006000060600006060000000606000000606040000004000000000000000000000000000000000000000000000000
00000000006006000060060000600600006006000060060060060000006006000000600640000004000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
04444440000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
04666640000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
06000060000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
06000060000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__gff__
0000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000010101010101010101010101010101010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000010000000000000000010000000100910000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000010001010101010100010001000100010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000010001000000000000010001000100010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000010001000101010101010001000100010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000010001000000000000000001000000010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000010001010101010101010101010101010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000010001000100000000000000000000010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000010001000100010101010101010101010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000010001000100010001000000000000010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000010001000000000001010101010100010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000010000000100010000000000000000010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000010101010101010101010101010101010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
